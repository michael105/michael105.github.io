
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />

<meta name="generator" content="vi: handmade" />

<title>Object orientation in javascript</title>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
</style>

<!-- #+i global.css.inc -->

<style>

body {
		background-color: lightgray;
		background: lightgray;
		font-family: Gentium, "Bitstream Vera Serif", "DejaVu Serif", FreeSerif, Palatino, "Palatino Linotype", "Book Antiqua", serif;
		font-size:0.9em;
}

pre {
		font-size: 1.1em;
		font-weight: 400;
		font-stretch: semi-expanded;
		line-height: 1.5;
		padding-left: 0px;
		//border-left: 1px solid black;
}

.textblock {
		font-size: 1.2em;
		font-weight: 500;
		font-stretch: semi-expanded;
		line-height: 1.4;
		padding-left: 0px;
		//border-left: 1px solid black;
}
.codeblock {
   font-size: 1.1em;
	 color: darkblue;
	 font-weight: 500;
	// border-left: 2px double blue;
	 padding-left: 0px;
	 margin-left: 60px;
}


a {
	color: #990000;
	text-decoration: none;
	border-bottom: 1px solid #990000;
		font-family: Gentium, "Bitstream Vera Serif", "DejaVu Serif", FreeSerif, Palatino, "Palatino Linotype", "Book Antiqua", serif;
}

li {
		margin-bottom: 5px;
		font-family: Gentium, "Bitstream Vera Serif", "DejaVu Serif", FreeSerif, Palatino, "Palatino Linotype", "Book Antiqua", serif;
}

p { 
		text-align: justify;
		margin-top:12px;
}

h2 {
	border-bottom: 2px solid black;
	padding-bottom: 5px;
	margin-bottom: 30px;
	margin-left: -35px;
	//margin-left: -30px;
	margin-right: -40px;
	margin-top: 25px;
}

h4 {
	//border-bottom: 2px solid black;
	margin-top: 40px;
	margin-bottom: 20px;
	margin-left: 4px;
	text-decoration: underline;
}

hr {
		margin: 16px -3px 10px -3px;
}


code {
   font-size: 1.2em;
	 //color: darkblue;
	 color: #04198c;
	 font-weight: 500;
	// border-left: 2px double blue;
	 padding-left: 10px;
}

.header {
		margin: 0px;
		padding: 0px;
		border: 0px;
		position: absolute;
		top: 0px;
		left: 0px;
		right: 0px;
		height: 100px;
		font-size: 12px;
		background: #242424;
		border-bottom: 5px solid #FFB92A;
}

.headline {
		position: relative;
		left: 125px;
		top: 25px;
		text-color: white;
		color: white;
}

.left {
	top: 140px;
	left:0 px;
	width:160px;
	//border-right: 5px solid white;
	position: absolute;
	//padding-top: 20px;
	padding-top: 70px; // evtl
}

.sitediv {
		//height: 100%;
		//top: 0px;
		//left: 170px;
		bottom: 0px;
		position: relative;
		margin: 0px 0px 0px 170px;
		padding: 0px 0px 0px 0px;
}

.content {
	top: 110px;
	padding-top: 2px;
	padding-bottom: 20px;
	//left: 0px;
	width:800px;
	padding-left: 90px;
	//padding-left: 65px;
	padding-right: 50px;
	//padding-right: 25px;
	//padding-left: 35px;
	margin-bottom: 160px;
	position: relative;
		font-family:Gentium,"Bitstream Vera Serif", "DejaVu Serif", FreeSerif,	Palatino, "Palatino Linotype", "Book Antiqua", serif;
		line-height:1.3;
		align=center;

	border-left: 5px solid white;
}

.footer {
		margin: 25px 25px 0px 25px;
		position: relative;
}

.bottomright {
		margin: 25px 25px 0px 0px;
		font-size:10pt;
		//right: 40px;
		text-align: right;
		//border-top:1px solid #333333;
		position: relative;
		//bottom:0px;
}


.generation {
		//padding:0px 0px 0px 0px;
		//margin: 25px 25px 0px 25px;
		font-size:10pt;
		//border-top:2px solid #333333;
		position: relative;
		left: 5px;
		top:-8px;
}

section {
		margin: 0px;
}
.heading {
		position: absolute;
		top: 0px;
		left: 0px;
		right: 0px;
		height: 125px;
		font-size: 12px;
		background: #242424;
		border-bottom: 5px solid #FFB92A;
}


/* Style definitions generated by highlight 3.57, http://www.andre-simon.de/ */
/* highlight theme: Kwrite Editor */
body.hl	{ background-color:#e0eaee; }
pre.hl	{ color:#000000; background-color:#e0eaee; font-size:10pt; font-family:'Courier New',monospace;}
.hl.num { color:#b07e00; }
.hl.esc { color:#ff00ff; }
.hl.str { color:#bf0303; }
.hl.pps { color:#818100; }
.hl.slc { color:#838183; font-style:italic; }
.hl.com { color:#838183; font-style:italic; }
.hl.ppc { color:#008200; }
.hl.opt { color:#000000; }
.hl.ipl { color:#0057ae; }
.hl.lin { color:#555555; }
.hl.kwa { color:#000000; font-weight:bold; }
.hl.kwb { color:#0057ae; }
.hl.kwc { color:#000000; font-weight:bold; }
.hl.kwd { color:#010181; }




</style>





</head>
<body>

<div class="header">
<h1 class="headline">michael105.github.io | Object orientation in javascript</h1>
</div>


<div class="left">

<ul>
<li><a href="index.html">Main</a></li>
<li><a href="blog.html">Blog</a></li>
<li><a href="projects.html">Projects</a></li>
<li><a href="syscalls.html">Linux Syscalls</a></li>
<li><a href="csscolors.html">css color table</a></li>
<li><a href="javascript.html">Javascript OO</a></li>
<li><a href="links.html">Links</a></li>
<li><a href="aboutme.html">About me</a></li>
</ul>


</div>


<div class="sitediv">

<div class="content">

<h2 id="Main">Object orientation in javascript</h2>




<pre>
Written by my, some time ago. Found it again at the waybackmachine.

A javascript 'debugger', written in javascript.
Time did change, nowadays every browser got a debugger included.
On the other hand, this helped me to remember the object concept of js.
I'm leaving this mostly unchanged.
Originally it was possible to modify the examples. 
Didn't find out yet, what I did.
</pre>

<div align="center" width="100%">
<div id="maindiv" align="left">
				
			<h3>Object Orientation in Javascript - Objects and Instances</h3>
		<table class="contentpaneopen">
					<tr>
				<td width="70%" align="left" valign="top" colspan="2">
					<span class="small">
				</td>
			</tr>
						<tr>
				<td valign="top" colspan="2" class="createdate">
			</tr>
					<tr>
			<td valign="top" colspan="2">
				<div class="pagenavcounter">Page 1 of 2</div>Syntax and possiblities of object oriented javascript.
It's written mainly for cpp programmers, who need to get familiar with javascript,
and uses the terminology known by the cpp concept of object orientation.<br/>

  <script language="javascript" type="text/javascript">
  // <!--
  
function jsc(elementName){
	
	if ( !elementName )
	elementName = 'jscShowCase';
	var e = document.getElementsByName(elementName)[0];
	if ( !e )
	return;

	e.className="jscContentDiv";	
	var script = e.innerHTML;
	
	var lines = script.split("\n");
	
	var s = 'function output(string){ document.getElementById("'+ elementName + 'OutputDiv").innerHTML = ' +  'document.getElementById("'+ elementName + 'OutputDiv").innerHTML + "<br/>" + string;};';

	var html = '<div class="jscShowCaseOuterDiv"><div class="jscShowCaseCodeDiv"><table class="jscCodeTable" cellpadding="0" cellspacing="0" border=0">';
		
	for ( var a = 0; a<lines.length; a++ ){
		 if ( jsc.containsCode(lines[a]) ){ // seems to contain some code
			 s += 'if (!jsc.line(0,'+(a+1)+', \'' + elementName + '\') ) throw "0"; '+lines[a]+
					 'if (!jsc.line(1,'+(a+1)+', \'' + elementName + '\') ) throw "0"; '+ 
					 "\n";//'; if (!jsc.line('+(a+1)+', \'' + elementName + '\') ) throw "0";'+"\n";
		 } else {
			 s+= lines[a]+"\n";
		 }
		 html += '<tr class="jscCodeRow"><TD class="jscLineNumber">' + (a+1) + '</td><td class="jscCodeLine" id="jsc' + elementName + (a+1) +
				 '">' + lines[a] + '</td></tr>';

	}
//	s+= '} catch(e) {}';
	
	jsc[elementName+'linenumbers'] = lines.length;
	html += 
		
		'</table></div>' +
			'<div class="jscDebugDiv"><div class="jscOutputOuterDiv" id="' + elementName + 'OutputDiv">Output:<br/></div></div>' +  
		 
		'<div class="jscButtonsDiv"><button onClick="jsc.run(\'' + elementName + '\')">Run</button>' +
'<button onClick="jsc.debug(\'' + elementName + '\')">Debug</button>' +
'<button onClick="jsc.stepInto(\'' + elementName + '\')">Step Forward</button>'+
			'<button onClick="jsc.stepBack(\'' + elementName + '\')">Step Back</button>'+
			'<button onClick="jsc.stepOver(\'' + elementName + '\')">Step Over</button>'+			
			'</div></div>'; 
	 			
	
	e.innerHTML = html;
	
	s = s.replace( /&lt;/, '<' );
	jsc[elementName + 'code'] = s;
	//eval(s);
	//alert(s);
}
new jsc();


jsc.containsCode = function(s){
	if ( s.match(/^.*\S+.*$/)  && 
		!s.match(/(^\/\/)|(^\s*$)|(^\s*\/\/)/  ) )
			return(true);
	
	return(false);
}

// Is callen by each line of the dynamically created code within the jscShowCase
jsc.line = function(linestart, linenumber, name){
	if ( ! this[name + 'debug'] ){ // No debug - Run or Continue clicked
		// Insert if Breakpoint  
		this[name + 'currentlinenumber'] = linenumber;
		return(true);
	}
	
	document.getElementById('jsc' + name + linenumber ).className = 'jscCodeLine';
	
	this[name + 'lastlinenumber2'] = this[name + 'lastlinenumber'];	
	this[name + 'lastlinenumber'] = linenumber;	
	// Unsure about the next two lines...
 	if ( this[name + 'currentlinenumber'] == linenumber )
 		return(true);
	
	
	
 	this[name + 'currentlinenumber'] = linenumber;
	
	if ( !this[name+'line'+linenumber] ){
		this[name+'line'+linenumber] = 1;
		this[name+'lineRunning'+linenumber] = 1;
	} else {
		if ( this[name+'lineRunning'+linenumber] < this[name+'line'+linenumber] ){
			this[name+'lineRunning'+linenumber] ++;
			return( true );
		}
	
		if ( this[name+'line'+linenumber] == this[name+'lineRunning'+linenumber] ){
			this[name+'line'+linenumber] ++;
			//return( true );
		} else {
// 			this[name+'line'+linenumber] ++;
// 			document.getElementById('jsc' + name + linenumber ).className = 'jscCodeLine';
// 			return(true);
		}
	}
	
	if ( this[name + 'stepOver'] ){
		if ( this[name + 'stepOver'] + 1 > linenumber ){
			return(true);
		}
	}
	
	document.getElementById('jsc' + name + linenumber ).className = 'jscCodeLineHighlight';
	
	/*this[name + 'halt']	= true;
	while( this[name + 'halt'] ){
		this.Sleep(1);
	}*/
	
//   	if ( (this[name+'stepOver'] == linenumber ) && (linestart == 0) )
//   			return( true );
	//if ( this[name+'stepOver'] != 0 && this[name+'stepOver'] 
	this[name + 'lastlinenumber'] = linenumber;
	
	throw( 0 );
}
	
	
jsc.run = function(name){
	this[name + 'debug'] = false;
	this[name + 'currentlinenumber'] = 0;
	this.execute(name);
	
}

jsc.debug = function(name){
	this[name + 'debug'] = true;
	this[name + 'currentlinenumber'] = 0;
	
	var a;
	for ( a=1; a<this[name+'linenumbers']; a++ ){
		this[name+'lineRunning'+a] = 0;
		this[name+'line'+a] = 0;
	}
		
	this.execute(name);
	
}

jsc.stepInto = function(name){
	this[name + 'debug'] = true;
	this[name + 'currentlinenumber'] = 0;
	
	var a;
	for ( a=1; a<this[name+'linenumbers']; a++ ){
		this[name+'lineRunning'+a] = 0;
	}
	
	this.execute(name);
}


jsc.stepBack = function(name){
	this[name + 'debug'] = true;
	this[name + 'currentlinenumber'] = 0;
	
		
	if ( this[name + 'lastlinenumber'] && (this[name + 'line' + this[name + 'lastlinenumber']]) )
	{
		document.getElementById('jsc' + name + this[name + 'lastlinenumber'] ).className = 'jscCodeLine';
		this[name + 'line' + this[name + 'lastlinenumber']] -= 1;
	}
	if ( this[name + 'lastlinenumber2'] && (this[name + 'line' + this[name + 'lastlinenumber2']]) )
	{
		this[name + 'line' + this[name + 'lastlinenumber2']] -= 1;
	}
	
	var a;
	for ( a=1; a<(this[name+'linenumbers']); a++ ){
		this[name+'lineRunning'+a] = 0;
	}
	
	this.execute(name);
}

jsc.stepOver = function(name){
	this[name + 'debug'] = true;
	this[name + 'stepOver'] = this[name + 'currentlinenumber'];
	this[name + 'currentlinenumber'] = 0;

	
	var a;
	for ( a=1; a<this[name+'linenumbers']; a++ ){
		this[name+'lineRunning'+a] = 0;
	}
	
	this.execute(name);
	this[name + 'stepOver'] = 0;
}

jsc.execute = function(name){
document.getElementById(name + 'OutputDiv').innerHTML = "Output:<br />";
	try {
		eval( this[name + 'code'] );
	} catch(e) {
		if ( e == 0 )
			return; // Step done
		if ( this[name + 'currentlinenumber'] > 0 )
		document.getElementById('jsc' + name + this[name + 'currentlinenumber'] ).className = 'jscCodeLineError';
		alert ( e );
	}
}

/*
jsc.Sleep = function(naptime){
	naptime = naptime * 1000;
	var sleeping = true;
	var now = new Date();
	var alarm;
	var startingMSeconds = now.getTime();
	//alert("starting nap at timestamp: " + startingMSeconds + "\nWill sleep for: " + naptime + " ms");
	while(sleeping){
		alarm = new Date();
		alarmMSeconds = alarm.getTime();
		if(alarmMSeconds - startingMSeconds > naptime){ sleeping = false; }
	}      
	//alert("Wakeup!");
}*/





  // -->
  </script>

	<style>
.jscCodeLineHighlight {
	background-color: blue;
	padding-left: 3px;
	padding-right: 5px;
	padding-top: 0px;
	padding-bottom: 0px;
}

.jscCodeLineError {
	background-color: red;
	padding-left: 3px;
	padding-right: 5px;
	padding-top: 0px;
	padding-bottom: 0px;
}

.jscCodeTable {
	border: 0;
}
.jscCodeLine {
	padding-right: 5px;	
	padding-top: 0px;
	padding-bottom: 0px;
	padding-left: 3px;
}

.jscLineNumber {
	padding: 0px 4px 0px 1px;
	background-color: grey;
/* 	display: inline; */
}

.jscShowCaseCodeDiv {
	background-color: lightgrey;
	border: 1px black solid;
	padding-top: 5px;
	padding-bottom: 5px;
	padding-left: 0px;
	padding-right: 0px;
/* 	display: block; */
	float: left;
}

.jscDebugDiv {
 /*position: fixed;*/
	top: 0px;
	/*height: 600px;*/
	/*width: 100%;*/
}


.jscOutputOuterDiv {
	min-width: 200px;
	overflow: auto;
left:25px;
position:relative;
	border: 1px black solid;
	min-height:350px;
	background-color: lightgrey;
	//float: right;
/* 	clear: left; */
}

.jscButtonsDiv {
	clear: left;
}
	</style>

<br/><br/>
Javascript is simple.
To be honest, I don't like Javascript.<br/>
Sometimes I get the feeling it's just one big flaw. What you write and test in firefox will most likely not run in the internet explorer, if you make it work in explorer6, it doesn't run in explorer7, and so on...<br/>
<br/>
But there's no choice.<br/>
<br/>
When I needed to get myself familiar with the more advanced bugs of javascript, <br/>
I had a hard time to get the concept of object orientation with javascript.<br/>
Not because it would be complicated, but because I simply thought in my much more complex categories, 
furthermore I wasn't able to find a short tutorial which would had shown just howto make a class, ..<br/>
<br/>
So I decided to focus on the differences between cpp and javascript and wrote some code to play around with object orientation.<br/>
<br/>
For fun and learning I wrote an interactive debugger, which should show some concepts.<br/><br/>
If you debug the examples, you hopefully will be able to get some understanding of the object orientation concept in javascript.<br/>
I'd like to suggest stepping line by line and watching the output.<br/>
<br/>

<br/>
In difference to cpp, there is no public, private, virtual,.<br/>
<br/>
There is however the concept of object orientation.<br/>
<br/>
First and big difference: in javascript ALL arrays and functions are objects and could be named classes.<br/>
You can add functions and variables to them, and there's no protection like in cpp.(public/private).<br/>
<br/>
Therefore you don't need to declare class variables, you can add "properties" everywhere in your code (to the class as well as to the instance).<br/>
I'd however consider this bad practice and would like to suggest a cpp like style of declaring all methods and variables of a object within a clearly separated part of your script.<br/>
<br/>
<br/>
Short example:<br/>
<br/>
<pre><div name="src1">
function obj(){  
};
// We could replace the two lines above with var obj = [];
// declaring an (empty) array this way

obj.variable = 'This is obj'; 	
  // sets the "static" class variable variable
  // Since all functions and arrays are nothing else than objects, 
  // it adds the property "variable" to the object "obj"

obj.dump = function (){
  output( obj.variable );
// this.variable reads out the static variable of the obj "class"
};

obj.dump();
</div></pre>
<script language="JavaScript">
new jsc('src1');
</script>
<br/>
I would compare the object obj with a namespace.<br/>
<br/>
I've named the variable "obj.variable" a "static" class variable, because declaring a class and creating a instance is quite similar and can be mixed with objectproperties:<br/>
<br/>
<pre><div name="src2">
function obj(){  
};
new obj();	 
 // According to "Javascript, the definitive guide",
 // chapter 8.4, O'Reilly, by David Flanagan new obj() is needed 
 // in order to use prototypes	

obj.variable = 'Static';

obj.prototype.variable = 'This is obj';
// sets the "virtual" class variable variable

obj.prototype.dump = function (){

  output( this.variable );	
  // this.variable reads out the virtual variable of the obj "class", 
  // "This is obj" / "Hello again" in this case
	
  output( obj.variable );	// Will output "Static"
};

var o = new obj();	
// Create a new instance of obj

o.dump();		
// Call the instance function dump of obj

o.variable = 'Hello again';	
// Replaces "This is obj" with "Hello again" , 
// sets the instance variable "variable"

o.dump();


var o2 = new obj();
o2.dump();	
//will alert "This is obj" again.
</div></pre>
<script language="JavaScript">
new jsc('src2');
</script>

Again according to the book "Javascript, the definitive guide", chapter 8.4,
all objects declared as prototypes will be shared in the memory along with all instances of the classes.<br/>
They will be "unshared", as soon as they are written to.<br/>
<br/>
In the hope I made the difference between objects and instances clear,
let's proceede with inheritance.<br/>
<br/><div class="pagenavbar">
	<div>Prev - <a href="javascript2.html">Next &gt;&gt;</a></div></div><br/>			</td>
		</tr>
					<tr>
				<td colspan="2" align="left" class="modifydate">
				</td>
			</tr>
					</table>

		<span class="article_seperator">&nbsp;</span>

					<div class="back_button">
				<a href="javascript:history.go(-1)">
					[ Back ]</a>
			</div>
			
</div>
 



</div>
</div>
<br><br><br>
<div class="footer">

<div class="bottomright">
<small style="border-top:1px solid black;padding: 3px">
2025  <!--#+e echo `date '+%Y/%m/%d %H:%M'`-->
 misc147 
</small>
</div>


<div class="generation">
<small>
</small>
</div>
</div>

</body>
</html>




